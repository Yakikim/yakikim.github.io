---
layout: mynote
tags: [notes, memo, purchasing, workflow, op] 
created: 2021-11-29 16:02
modified: 2021-11-29 16:02
type: Document
title:  הוספת סבב אישורים עבור מחלקת ניקיון 
---
Week Of: [[2021-11-28]]
[[2021-11-29]]


#  תזכיר בנושא  הוספת סבב אישורים עבור מחלקת ניקיון

[[home]]/[[Open University]]/[[Memos]]

## רקע\תיאור
התקבלה דרישה ממשה פנחס שעיקרה העברת דרישות נקיון לאישורו של עידן גהוזי. בנוסף התבקשתי להוסיף את עידן לסבב אישורי דרישות אחזקה: דרישות בתתי חשבון 1091 , 1661 , 0507, 1017, 0508 עוברות גם לאישור קובי גוילי. דרישות בתת חשבון 0509 עוברות מעידן ישירות למשה. 
יכולת אישור של עידן הינה 0 שקלים. ההגדרות בוצעו כדלהלן. 
נוצר תפקיד חדש עבור עידן - 000040.000031
![[Pasted image 20211129160824.png]]

לתפקיד הוענקה יכולת אישור 0 שקלים ("ללא הרשאות") 

נוצרה היררכיה חדשה - "סבב דרישות: ניקיון" באופן הבא. מזינים בכותרת המסך את שם הסבב החדש ולאחר שמירת המסך לוחצים על כפתור "Copy Hierarchy" מההיררכיה הקרובה ביותר לזו שרוצים להגדיר.

יש לסדר את ההיררכיות לפי הדרישה.

לבסוף יש להריץ את התוכנית Fill Employee Hierarchy.

מאחר והפונקציה GET_NEXT_APPROVER החזירה שגיאות, היה צורך להכניס את מלכה עזריה כמאשרת -HardCoded לאורך כל פרסונליזציית המסך שנכתבה. לדוגמא:

![[Pasted image 20211129162048.png]]

כך שהשליפה :
```plsql
 =select op_po_util_pkg.GET_NEXT_APPROVER(fnd_global.USER_ID,(SELECT rl.to_person_id
    FROM po_requisition_lines_all rl
   where rl.requisition_line_id = :LINES.REQUISITION_LINE_ID) ) FROM DUAL
```
הוחלפה ב:
```plsql
 = SELECT ppx.FULL_NAME FROM PER_PEOPLE_X PPX WHERE ppx.PERSON_ID = 549   /* =select op_po_util_pkg.GET_NEXT_APPROVER(fnd_global.USER_ID,(SELECT rl.to_person_id
    FROM po_requisition_lines_all rl
   where rl.requisition_line_id = :LINES.REQUISITION_LINE_ID) ) FROM DUAL*/
```

כנ"ל לגבי ה-ID

נ.ב. **במקרה זה,** לא נדרש לעדכן את הפרופיל "OP: Requisition Hierarchy"
עבור המשתמש IDANGA
 
#memo #op/memo
